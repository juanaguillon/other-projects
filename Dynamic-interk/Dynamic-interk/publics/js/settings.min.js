var Elmt = function () { this.structures = {}, this.manyElements = function (a) { if (a == Array) { for (var b = '', c = 0; c < a.length; c++)b += a[c]; return b } if ('object' == typeof a && !Array.isArray(a)) { var d = ''; for (k in a) a.hasOwnProperty(k) && (d += a[k]); return d } }, this.createCroqs = function (a, b) { if (!(a in this.structures)) { var c = ''; if (b === Array) c = this.manyElements(b); else if ('string' == typeof b) c = b; else if ('object' == typeof b) for (var d in b) { if (!b.hasOwnProperty(d)) return; c += b[d] } this.structures[a] = c } }, this.getCroqs = function (a) { if (this.structures.hasOwnProperty(a)) return this.structures[a] }, this.createAttrs = function (a, b) { var c = ''; for (var d in a) a.hasOwnProperty(d) && (a[d] == b || (c += ' ' + d + '="' + a[d] + '"')); return c }, this.createInput = function (a) { var b = '<input'; return b += this.createAttrs(a), b += ' >', b }, this.createElement = function (a, b = { elem: 'div' }) { var c = '<' + b.elem; return c += this.createAttrs(b, b.elem), c += ' >' + a + '</' + b.elem + '>', c } }, Sets = function (a) { this.theElements = new Elmt, this.$el = jQuery(a), this.defaults = { clicking: !1, start: 0, cloneObject: null, elemLength: jQuery(a).length, previus: !1, nextius: !1, test: 'first' }; var b = this, c = this.theElements, d = b.defaults, f = 0, g = !1; this.mouseMove = function (j = 'prev') { this.$el.mousedown(function () { if (!(2 > d.elemLength)) { b.defaults.clicking = !0; var l = jQuery(this); !(0 < l.prev().length) || (d.previus = !0), !(0 < l.next().length) || (d.nextius = !0), 'prev' == j && d.previus ? b.defaults.start = jQuery(this).prev().position().top : 'next' == j && d.nextius && (b.defaults.start = jQuery(this).next().position().top); b.defaults.cloneObject = jQuery(this).clone() } }), jQuery(document).mouseup(function () { d.clicking = !1; var l = b.defaults.clicking }), this.$el.mousemove(function (l) { if (!b.defaults.clicking) return !1; var m = b.defaults.cloneObject; m.css({ position: 'absolute', left: l.pageX - jQuery('#wpbody').offset().left - m.width() / 2, top: l.pageY - jQuery('#wpbody').offset().top - m.height() / 2 }).addClass('bd_clone').prop('disabled', !0), jQuery(this).after(m), console.log(this); var n = l.pageY - jQuery('#wpbody').offset().top, o = b.defaults.start, p = 'prev' == j ? jQuery(this).prev() : jQuery(this).next(); o >= n && d.previus && (d.start = p.position().top, console.log('box Changed')), console.log('|ePage| => ' + n + ' and |Starting| => ' + o) }) }, this.move_text = function (j) { var l = jQuery(j), m = l.val(), n = { dir: 'after', parent: l.parent() }; if (0 == this.$el.children('.val_priority').length) n.parent.prependTo(jQuery('.dynil_setter_pages')); else { var o = this.$el = jQuery('.dyn_page_bd'), p = o.children('.val_priority'); p.each(function () { n.th = jQuery(this), n.th_int = parseInt(n.th.text()), n.th_parent = n.th.parent(); var q = { next: n.th_parent.next(), prev: n.th_parent.prev() }; q.next_children = q.next.children('.val_priority'), q.prev_children = q.prev.children('.val_priority'), 0 < q.next_children.length ? m >= n.th_int && parseInt(q.next_children.text()) >= m ? (g = n.th_parent, f = parseInt(g.children('.val_priority').text())) : m <= n.th_int && (0 == parseInt(q.prev.length) || parseInt(q.prev_children.text() >= m)) && (g = n.th_parent, f = parseInt(g.children('.val_priority').text()), n.dir = 'before') : n.th_int < m && (g = n.th_parent, f = parseInt(g.children('.val_priority').text())) }) } 'after' == n.dir ? l.parent().insertAfter(g) : 'before' == n.dir && l.parent().insertBefore(g), l.after(c.createElement(m, { elem: 'span', 'class': 'val_priority dyn_chance' })), l.after(c.createInput({ type: 'hidden', name: 'priority_vals[]', value: m })), l.remove() }, this.toInput = function (j, l, m = function () { }) { var j = jQuery(j); j.next('input[name="priority_vals[]"]').remove(); var n = c.createInput({ value: j.html(), type: 'text', 'class': 'dyn_input_change' }); j.after([n, l]), j.remove(), m() }, this.inCode = function (j, l, m = function () { }) { var n = jQuery(j), o = n.text(), p = c.createInput({ value: o, type: 'text', 'class': 'dyn_input_change' }); n.after([p, l]), n.remove(), m() }, this.text_ajax = function () { var j = jQuery('#dyn_search_top_page'); j.keyup(function () { if (3 < jQuery(this).val().length) { var l = new Ajax_request({ data: { action: 'show_pages', name: j.val() }, success: function (m) { jQuery('.dyn_topping_respond').append(m), b.process_the_ajax() } }); l.exec() } }) }, this.process_the_ajax = function () { jQuery('.names_pages').mouseover(function () { jQuery('.ajax_page_selected').removeClass('ajax_page_selected'), jQuery(this).addClass('ajax_page_selected'), jQuery('.ajax_page_selected').click(function () { var j = jQuery(this), l = { title: c.createElement(j.children('.dyn_ajax_title').text()), id: c.createElement(j.children('.dyn_ajax_id').val()) }; console.log(l.title); var m = c.createElement(c.manyElements(l)); jQuery('.dyn_topping_respond').after(m) }) }) } };